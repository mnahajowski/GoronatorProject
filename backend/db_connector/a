create table administrator (id serial not null, primary key (id));
create table wezel (id serial not null, administrator_id int4 not null, nazwa varchar(255), wspolrzedna_x float4 not null, wspolrzedna_y float4 not null, primary key (id));
create table odcinek (id serial not null, region_id int4 not null, wezel_id2 int4 not null, administrator_id int4 not null, wezel_id int4 not null, punkty_got_w_kierunku int4 not null, punkty_got_w_przeciwnym_kierunku int4, nazwa varchar(255), primary key (id));
create table trasa (id serial not null, turysta_id int4 not null, przodownik_id int4 not null, got_id int4, punkty_got int4 not null, status int4, data_zweryfikowania date, primary key (id));
create table typ_odznaki (id serial not null, nazwa varchar(255), primary key (id));
create table got (id serial not null, turysta_id int4 not null, typ_odznaki int4 not null, data_zdobycia date, wartosc_punktowa_got int4, primary key (id));
create table status_trasy (id serial not null, nazwa varchar(255), primary key (id));
create table region (id serial not null, primary key (id));
create table zamkniecie (id serial not null, odcinek_id int4 not null, administrator_id int4 not null, primary key (id));
create table odcinek_trasy (id serial not null, odcinek_id int4 not null, trasa_id int4 not null, punkty_got int4, kierunek varchar(255), primary key (id));
create table uprawnienia (id serial not null, administrator_id int4 not null, region_id int4 not null, przodownik_id int4 not null, primary key (id));
create table przodownik (id serial not null, administrator_id int4 not null, data_wygasniecia_legitymacji date, primary key (id));
create table turysta (id serial not null, data_urodzenia date, punkty_z_poprzedniej_odznaki int4, primary key (id));
create table dokumentacja_trasy (id serial not null, trasa_id int4 not null, primary key (id));
alter table odcinek add constraint "rozpoczyna sie w" foreign key (wezel_id) references wezel (id);
alter table odcinek add constraint aktualizuje foreign key (administrator_id) references administrator (id);
alter table wezel add constraint modyfikuje foreign key (administrator_id) references administrator (id);
alter table odcinek add constraint "konczy sie w" foreign key (wezel_id2) references wezel (id);
alter table odcinek add constraint "nalezy do" foreign key (region_id) references region (id);
alter table zamkniecie add constraint oglasza foreign key (administrator_id) references administrator (id);
alter table zamkniecie add constraint podlega foreign key (odcinek_id) references odcinek (id);
alter table odcinektrasy add constraint "sklada sie z" foreign key (trasa_id) references trasa (id);
alter table odcinektrasy add constraint jest foreign key (odcinek_id) references odcinek (id);
alter table trasa add constraint "jest zaliczona na poczet" foreign key (got_id) references got (id);
alter table uprawnienia add constraint dodaje foreign key (administrator_id) references administrator (id);
alter table trasa add constraint weryfikuje foreign key (przodownik_id) references przodownik (id);
alter table uprawnienia add constraint dotyczy foreign key (region_id) references region (id);
alter table uprawnienia add constraint posiada foreign key (przodownik_id) references przodownik (id);
alter table przodownik add constraint "przedluza legitymacje" foreign key (administrator_id) references administrator (id);
alter table trasa add constraint planuje foreign key (turysta_id) references turysta (id);
alter table got add constraint zdobywa foreign key (turysta_id) references turysta (id);
alter table dokumentacjatrasy add constraint "jest dokumentowana" foreign key (trasa_id) references trasa (id);
